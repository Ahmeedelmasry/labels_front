import{r as p,z as I,o as A,f as u,k as $,l as x,q as n,s as e,v as y,t as k,A as j,m as _,B,C as t,D as L,E as R,F as h,G as S,H as z,I as F}from"./entry.d2eac3d2.js";import{m as G}from"./measuringUnits.441691f4.js";import{c as K,r as T,n as H,b as J,u as E}from"./index.edcb52a9.js";import{V as O,a as Q}from"./VSkeletonLoader.d47c2c61.js";const W={class:"update_banner"},X={class:"field_container"},Y=_("label",{for:"typeName"},"اسم الوحدة",-1),Z={class:"input_parent position-relative"},ee={key:0,class:"err_msg"},te={class:"field_container"},ne=_("label",{for:"typeName"},"عدد الكيلوهات",-1),oe={class:"input_parent position-relative"},ae={key:0,class:"err_msg"},se={class:"actions text-center mt-5"},le={__name:"Update",props:["openPopup","toUpdate"],emits:["closePopup","regetData"],setup(b,{emit:v}){const c=b,f=G(),l=p({name:null,quantityPerKilo:null}),r=p(!1),g=p(!1),m=p({name:{required:K.withMessage("هذا الحقل مطلوب",T)},quantityPerKilo:{required:K.withMessage("هذا الحقل مطلوب",T),numeric:K.withMessage("هذا الحقل يقبل ارقام فقط",H),minLength:K.withMessage("هذا الحقل يجب ان تكون قيمته بين 1 و 1000000",J(1,1e6))}});I(()=>r.value,w=>{w||setTimeout(()=>{v("closePopup")},200)});let a=E(m,l);const D=async()=>{c.toUpdate&&(m.value.image={},a=E(m,l)),await a.value.$validate()&&(g.value=!0,c.toUpdate?await f.doUpdateUnit({id:c.toUpdate.selectable.id,name:l.value.name,quantityPerKilo:l.value.quantityPerKilo})&&(v("regetData"),r.value=!1):await f.doAddUnit({name:l.value.name,quantityPerKilo:l.value.quantityPerKilo})&&(v("regetData"),r.value=!1),g.value=!1)};return A(()=>{r.value=c.openPopup,c.toUpdate&&(l.value.name=c.toUpdate.selectable.name,l.value.quantityPerKilo=c.toUpdate.selectable.quantityPerKilo)}),(w,d)=>{const i=u("v-card-title"),P=u("v-icon"),U=u("v-col"),V=u("v-row"),M=u("v-container"),q=u("v-btn"),N=u("v-form"),C=u("v-card"),s=u("v-dialog");return $(),x("div",W,[n(s,{modelValue:t(r),"onUpdate:modelValue":d[3]||(d[3]=o=>S(r)?r.value=o:null),width:"800",persistent:""},{default:e(()=>[n(C,null,{default:e(()=>[n(i,{class:"mb-0 text-center bg-grey-lighten-3 main_title font-safe-bold",style:{"font-size":"22px"}},{default:e(()=>[y(k(b.toUpdate?"تعديل وحدة وزن":"اضافة وحدة وزن جديدة"),1)]),_:1}),n(N,{class:"pa-5",onSubmit:j(D,["prevent"])},{default:e(()=>[n(M,null,{default:e(()=>[n(V,{dir:"rtl"},{default:e(()=>[n(U,{cols:"12",md:"6"},{default:e(()=>[_("div",X,[Y,_("div",Z,[B(_("input",{type:"text","onUpdate:modelValue":d[0]||(d[0]=o=>t(l).name=o),placeholder:"اسم الوحدة",name:"typeName",id:"typeName",class:L(t(a).$errors.find(o=>o.$property=="name")?"err_field":"")},null,2),[[R,t(l).name]]),n(P,{class:"position-absolute"},{default:e(()=>[y("mdi-rename-outline")]),_:1})])]),t(a).$errors.find(o=>o.$property=="name")?($(),x("span",ee,k(t(a).$errors.find(o=>o.$property=="name").$message),1)):h("",!0)]),_:1}),n(U,{cols:"12",md:"6"},{default:e(()=>[_("div",te,[ne,_("div",oe,[B(_("input",{type:"text","onUpdate:modelValue":d[1]||(d[1]=o=>t(l).quantityPerKilo=o),placeholder:"عدد الكيلوهات",name:"typeName",id:"typeName",class:L(t(a).$errors.find(o=>o.$property=="quantityPerKilo")?"err_field":"")},null,2),[[R,t(l).quantityPerKilo]]),n(P,{class:"position-absolute"},{default:e(()=>[y("mdi-currency-usd")]),_:1})])]),t(a).$errors.find(o=>o.$property=="quantityPerKilo")?($(),x("span",ae,k(t(a).$errors.find(o=>o.$property=="quantityPerKilo").$message),1)):h("",!0)]),_:1})]),_:1})]),_:1}),_("div",se,[n(q,{color:"red",class:"mr-3",onClick:d[2]||(d[2]=o=>r.value=!1),disabled:t(g)},{default:e(()=>[y("الغاء")]),_:1},8,["disabled"]),n(q,{color:"green",type:"submit",loading:t(g)},{default:e(()=>[y("حفظ")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}}},ie=le,re={class:"dashboard_banners_listing"},de={class:"page_toolbar d-flex align-center justify-space-between"},ue={class:"toolbar_btns"},ce=_("div",null,"لايوجد بيانات",-1),pe={__name:"Listing",props:["units","loading"],emits:["regetItems"],setup(b,{emit:v}){const c=p(!1),f=p(!1),l=p(!1),r=p(null),g=p(null),m=p(1),a=p(10),D=p([{title:"رقم",key:"index"},{title:"اسم الوحدة",key:"name"},{title:"عدد الكيلوهات",key:"quantityPerKilo"},{title:"اجراء",key:"actions"}]),w=[{title:"الرئيسية",disabled:!1,to:{name:"index"}},{title:"وحدات الوزن",disabled:!0}];return I(()=>m.value,d=>{v("regetItems",{page:d,limit:a.value})}),I(()=>a.value,d=>{v("regetItems",{page:m.value,limit:d})}),(d,i)=>{const P=u("v-icon"),U=u("v-btn"),V=u("v-breadcrumbs"),M=u("v-col"),q=u("v-row"),N=u("v-container"),C=ie;return $(),x("div",re,[_("div",de,[_("div",ue,[n(U,{onClick:i[0]||(i[0]=s=>c.value=!0),width:"20",size:"sm",elevation:"0",color:"transparent"},{default:e(()=>[n(P,{color:"white",size:"25"},{default:e(()=>[y("mdi-plus-circle")]),_:1})]),_:1}),n(U,{width:"20",size:"sm",elevation:"0",color:"transparent",class:"ms-3"},{default:e(()=>[n(P,{color:"white",size:"25"},{default:e(()=>[y("mdi-printer")]),_:1})]),_:1})]),n(V,{items:w,dir:"rtl",class:"pa-0 mb"},{title:e(({item:s})=>[y(k(s.title.toUpperCase()),1)]),_:1})]),n(N,{class:"page_container",fluid:""},{default:e(()=>[b.units?($(),z(q,{key:0,class:"px-4"},{default:e(()=>[n(M,{cols:"12",class:"section_container dashboard_table pa-0"},{default:e(()=>[n(t(O),{headers:t(D),items:b.units.content,loading:b.loading,"items-per-page":t(a),"onUpdate:itemsPerPage":i[1]||(i[1]=s=>S(a)?a.value=s:null),page:t(m),"onUpdate:page":i[2]||(i[2]=s=>S(m)?m.value=s:null),"items-length":b.units.totalElements?b.units.totalElements:0,"no-data-text":"لايوجد بيانات","show-current-page":""},{loading:e(()=>[n(t(Q),{type:"table-row@4"})]),"item.index":e(({item:s})=>[y(k(s.index+1),1)]),"item.actions":e(({item:s})=>[n(P,{color:"blue",style:{cursor:"pointer"},onClick:o=>(r.value=s,f.value=!0)},{default:e(()=>[y("mdi-square-edit-outline")]),_:2},1032,["onClick"]),n(U,{elevation:"0",color:"transparent",loading:s.selectable.loading,ripple:!1},{default:e(()=>[n(P,{color:"red",style:{cursor:"pointer"},class:"ml-2",size:"23",onClick:o=>(g.value=s.selectable,l.value=!0)},{default:e(()=>[y("mdi-lock")]),_:2},1032,["onClick"])]),_:2},1032,["loading"])]),"no-data":e(()=>[ce]),_:1},8,["headers","items","loading","items-per-page","page","items-length"])]),_:1})]),_:1})):h("",!0)]),_:1}),t(f)?($(),z(C,{key:0,openPopup:t(f),onClosePopup:i[3]||(i[3]=s=>(f.value=!1,r.value=null)),toUpdate:t(r),onRegetData:i[4]||(i[4]=s=>(m.value=1,v("regetItems",{page:1,limit:t(a)})))},null,8,["openPopup","toUpdate"])):h("",!0),t(c)?($(),z(C,{key:1,openPopup:t(c),onClosePopup:i[5]||(i[5]=s=>c.value=!1),onRegetData:i[6]||(i[6]=s=>v("regetItems",{page:1,limit:t(a)}))},null,8,["openPopup"])):h("",!0)])}}},me=pe,_e={class:"dashboard_tests_page mb-10"},be={__name:"index",setup(b){const v=G(),{units:c}=F(v),f=p(!0),l=async(r,g)=>{f.value=!0,await v.doGetUnits(r-1,g),f.value=!1};return A(()=>{l(1,10)}),(r,g)=>{const m=me;return $(),x("div",_e,[n(m,{units:t(c),loading:t(f),onRegetItems:g[0]||(g[0]=a=>l(a.page,a.limit))},null,8,["units","loading"])])}}};export{be as default};

import{r as c,z as I,o as G,f as d,k as y,l as U,q as o,s as e,v as b,t as C,A as F,m as _,B,C as t,D as R,E as T,F as D,G as q,H as z,I as H}from"./entry.d2eac3d2.js";import{s as j}from"./supplier.895df033.js";import{c as k,r as E,n as J,m as K,a as O,u as A}from"./index.edcb52a9.js";import{V as Q,a as W}from"./VSkeletonLoader.d47c2c61.js";const X={class:"update_banner"},Y={class:"field_container"},Z=_("label",{for:"typeName"},"اسم المورد",-1),ee={class:"input_parent position-relative"},te={key:0,class:"err_msg"},oe={class:"field_container"},se=_("label",{for:"typeName"},"رقم الهاتف",-1),ne={class:"input_parent position-relative"},ae={key:0,class:"err_msg"},le={class:"actions text-center"},ie={__name:"Update",props:["openPopup","toUpdate"],emits:["closePopup","regetData"],setup(h,{emit:v}){const u=h,f=j(),l=c({name:null,phone:null}),r=c(!1),g=c(!1),m=c({name:{required:k.withMessage("هذا الحقل مطلوب",E)},phone:{required:k.withMessage("هذا الحقل مطلوب",E),numeric:k.withMessage("هذا الحقل يقبل ارقام فقط",J),minLength:k.withMessage("هذا الحقل يجب ان يتكون من 11 رقم",K(11)),maxLength:k.withMessage("هذا الحقل يجب ان يتكون من 11 رقم",O(11))}});I(()=>r.value,x=>{x||setTimeout(()=>{v("closePopup")},200)});let n=A(m,l);const L=async()=>{u.toUpdate&&(m.value.image={},n=A(m,l)),await n.value.$validate()&&(g.value=!0,u.toUpdate?await f.doUpdateSupplier({id:u.toUpdate.selectable.id,name:l.value.name,phone:l.value.phone,isLocked:!1})&&(v("regetData"),r.value=!1):await f.doAddSupplier({name:l.value.name,phone:l.value.phone,isLocked:!1})&&(v("regetData"),r.value=!1),g.value=!1)};return G(()=>{r.value=u.openPopup,u.toUpdate&&(l.value.name=u.toUpdate.selectable.name,l.value.phone=u.toUpdate.selectable.phone)}),(x,p)=>{const i=d("v-card-title"),$=d("v-icon"),w=d("v-col"),M=d("v-row"),N=d("v-container"),P=d("v-btn"),S=d("v-form"),V=d("v-card"),a=d("v-dialog");return y(),U("div",X,[o(a,{modelValue:t(r),"onUpdate:modelValue":p[3]||(p[3]=s=>q(r)?r.value=s:null),width:"800",persistent:""},{default:e(()=>[o(V,null,{default:e(()=>[o(i,{class:"mb-0 text-center bg-grey-lighten-3 main_title font-weight-bold",style:{"font-size":"22px"}},{default:e(()=>[b(C(h.toUpdate?"تعديل مورد":"اضافة مورد"),1)]),_:1}),o(S,{class:"pa-5",onSubmit:F(L,["prevent"])},{default:e(()=>[o(N,null,{default:e(()=>[o(M,{dir:"rtl"},{default:e(()=>[o(w,{cols:"12",md:"6"},{default:e(()=>[_("div",Y,[Z,_("div",ee,[B(_("input",{type:"text","onUpdate:modelValue":p[0]||(p[0]=s=>t(l).name=s),placeholder:"اسم المورد",name:"typeName",id:"typeName",class:R(t(n).$errors.find(s=>s.$property=="name")?"err_field":"")},null,2),[[T,t(l).name]]),o($,{class:"position-absolute"},{default:e(()=>[b("mdi-rename-outline")]),_:1})])]),t(n).$errors.find(s=>s.$property=="name")?(y(),U("span",te,C(t(n).$errors.find(s=>s.$property=="name").$message),1)):D("",!0)]),_:1}),o(w,{cols:"12",md:"6"},{default:e(()=>[_("div",oe,[se,_("div",ne,[B(_("input",{type:"text","onUpdate:modelValue":p[1]||(p[1]=s=>t(l).phone=s),placeholder:"رقم الهاتف",name:"phoneNum",id:"phoneNum",class:R(t(n).$errors.find(s=>s.$property=="phone")?"err_field":"")},null,2),[[T,t(l).phone]]),o($,{class:"position-absolute"},{default:e(()=>[b("mdi-cellphone")]),_:1})])]),t(n).$errors.find(s=>s.$property=="phone")?(y(),U("span",ae,C(t(n).$errors.find(s=>s.$property=="phone").$message),1)):D("",!0)]),_:1})]),_:1})]),_:1}),_("div",le,[o(P,{color:"red",class:"mr-3",onClick:p[2]||(p[2]=s=>r.value=!1),disabled:t(g)},{default:e(()=>[b("الغاء")]),_:1},8,["disabled"]),o(P,{color:"green",type:"submit",loading:t(g)},{default:e(()=>[b("حفظ")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}}},re=ie,pe={class:"dashboard_banners_listing"},de={class:"page_toolbar d-flex align-center justify-space-between"},ue={class:"toolbar_btns"},ce=_("div",null,"لايوجد بيانات",-1),me={__name:"Listing",props:["suppliers","loading"],emits:["regetItems"],setup(h,{emit:v}){const u=c(!1),f=c(!1),l=c(!1),r=c(null),g=c(null),m=c(1),n=c(10),L=[{title:"الرئيسية",disabled:!1,to:{name:"index"}},{title:"المودرين",disabled:!0}],x=c([{title:"رقم",key:"index"},{title:"اسم المورد",key:"name"},{title:"رقم الهاتف",key:"phone"},{title:"اجراء",key:"actions"}]);return I(()=>m.value,p=>{v("regetItems",{page:p,limit:n.value})}),I(()=>n.value,p=>{v("regetItems",{page:m.value,limit:p})}),(p,i)=>{const $=d("v-icon"),w=d("v-btn"),M=d("v-breadcrumbs"),N=d("v-col"),P=d("v-row"),S=d("v-container"),V=re;return y(),U("div",pe,[_("div",de,[_("div",ue,[o(w,{onClick:i[0]||(i[0]=a=>u.value=!0),width:"20",size:"sm",elevation:"0",color:"transparent"},{default:e(()=>[o($,{color:"white",size:"25"},{default:e(()=>[b("mdi-plus-circle")]),_:1})]),_:1}),o(w,{width:"20",size:"sm",elevation:"0",color:"transparent",class:"ms-3"},{default:e(()=>[o($,{color:"white",size:"25"},{default:e(()=>[b("mdi-printer")]),_:1})]),_:1})]),o(M,{items:L,dir:"rtl",class:"pa-0 mb"},{title:e(({item:a})=>[b(C(a.title.toUpperCase()),1)]),_:1})]),o(S,{class:"page_container",fluid:""},{default:e(()=>[h.suppliers?(y(),z(P,{key:0,class:"px-4"},{default:e(()=>[o(N,{cols:"12",class:"section_container dashboard_table pa-0"},{default:e(()=>[o(t(Q),{headers:t(x),items:h.suppliers.content,loading:h.loading,"items-per-page":t(n),"onUpdate:itemsPerPage":i[1]||(i[1]=a=>q(n)?n.value=a:null),page:t(m),"onUpdate:page":i[2]||(i[2]=a=>q(m)?m.value=a:null),"items-length":h.suppliers.totalElements?h.suppliers.totalElements:0,"no-data-text":"لايوجد بيانات","show-current-page":""},{loading:e(()=>[o(t(W),{type:"table-row@4"})]),"item.index":e(({item:a})=>[b(C(a.index+1),1)]),"item.actions":e(({item:a})=>[o($,{color:"blue",style:{cursor:"pointer"},onClick:s=>(r.value=a,f.value=!0)},{default:e(()=>[b("mdi-square-edit-outline")]),_:2},1032,["onClick"]),o(w,{elevation:"0",color:"transparent",loading:a.selectable.loading,ripple:!1},{default:e(()=>[o($,{color:"red",style:{cursor:"pointer"},class:"ml-2",size:"23",onClick:s=>(g.value=a.selectable,l.value=!0)},{default:e(()=>[b("mdi-lock")]),_:2},1032,["onClick"])]),_:2},1032,["loading"])]),"no-data":e(()=>[ce]),_:1},8,["headers","items","loading","items-per-page","page","items-length"])]),_:1})]),_:1})):D("",!0)]),_:1}),t(f)?(y(),z(V,{key:0,openPopup:t(f),onClosePopup:i[3]||(i[3]=a=>(f.value=!1,r.value=null)),toUpdate:t(r),onRegetData:i[4]||(i[4]=a=>(m.value=1,v("regetItems",{page:1,limit:t(n)})))},null,8,["openPopup","toUpdate"])):D("",!0),t(u)?(y(),z(V,{key:1,openPopup:t(u),onClosePopup:i[5]||(i[5]=a=>u.value=!1),onRegetData:i[6]||(i[6]=a=>v("regetItems",{page:1,limit:t(n)}))},null,8,["openPopup"])):D("",!0)])}}},_e=me,ve={class:"dashboard_tests_page mb-10"},ye={__name:"index",setup(h){const v=j(),{suppliers:u}=H(v),f=c(!0),l=async(r,g)=>{f.value=!0,await v.doGetSuppliers(r-1,g),f.value=!1};return G(()=>{l(1,10)}),(r,g)=>{const m=_e;return y(),U("div",ve,[o(m,{suppliers:t(u),loading:t(f),onRegetItems:g[0]||(g[0]=n=>l(n.page,n.limit))},null,8,["suppliers","loading"])])}}};export{ye as default};

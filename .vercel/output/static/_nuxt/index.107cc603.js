import{I as F,r as g,z as T,o as j,f as _,k as m,l as b,q as n,s as a,v,t as k,A as K,m as s,B as M,C as t,D as q,E as G,F as w,H as I,J as O,K as Q,L as W,G as E}from"./entry.d2eac3d2.js";import{g as H}from"./granary.cc76c106.js";import{c as X}from"./clients.811b60cb.js";import{c as z,r as S,u as A}from"./index.edcb52a9.js";import{V as Y,a as Z}from"./VSkeletonLoader.d47c2c61.js";const ee={class:"update_banner"},te={class:"field_container"},oe=s("label",{for:"typeName"},"اسم الصومعة",-1),ae={class:"input_parent position-relative"},ne={key:0,class:"err_msg"},se={class:"field_container"},le=s("label",{for:"typeName"},"المحافظة",-1),re={class:"input_parent position-relative"},ie={key:0,class:"err_msg"},de={class:"field_container"},ce=s("label",{for:"typeName"},"المدينة",-1),pe={class:"input_parent position-relative"},ue={key:0,class:"err_msg"},_e={class:"field_container"},me=s("label",{for:"typeName"},"المنطقة / الحي",-1),ve={class:"input_parent position-relative"},ge={key:0,class:"err_msg"},fe={class:"field_container"},ye=s("label",{for:"typeName"},"اسم العميل",-1),be={class:"input_parent position-relative"},$e=s("option",{value:""},"قم باختيار العميل",-1),he=["value"],ke={key:0,class:"err_msg"},we={class:"actions text-center mt-5"},Ue={__name:"Update",props:["openPopup","toUpdate"],emits:["closePopup","regetData"],setup($,{emit:f}){const c=$,y=H(),U=X(),{clients:h}=F(U),o=g({name:null,governorate:null,city:null,region:null,client:null}),p=g(!1),u=g(!1),C=g({name:{required:z.withMessage("هذا الحقل مطلوب",S)},governorate:{required:z.withMessage("هذا الحقل مطلوب",S)},city:{required:z.withMessage("هذا الحقل مطلوب",S)},region:{required:z.withMessage("هذا الحقل مطلوب",S)},client:{required:z.withMessage("هذا الحقل مطلوب",S)}});T(()=>p.value,i=>{i||setTimeout(()=>{f("closePopup")},200)});let r=A(C,o);const V=async()=>{c.toUpdate&&(C.value.image={},r=A(C,o)),await r.value.$validate()&&(u.value=!0,c.toUpdate?await y.doUpdateGranary({id:c.toUpdate.selectable.id,name:o.value.name,governorate:o.value.governorate,city:o.value.city,region:o.value.region,client:{id:o.value.client}})&&(f("regetData"),p.value=!1):await y.doAddGranary({name:o.value.name,governorate:o.value.governorate,city:o.value.city,region:o.value.region,client:{id:o.value.client}})&&(f("regetData"),p.value=!1),u.value=!1)};return j(()=>{U.doGetClients(),p.value=c.openPopup,c.toUpdate&&(o.value.name=c.toUpdate.selectable.name,o.value.governorate=c.toUpdate.selectable.governorate,o.value.city=c.toUpdate.selectable.city,o.value.region=c.toUpdate.selectable.region,o.value.client=c.toUpdate.selectable.client.id)}),(i,l)=>{const D=_("v-card-title"),x=_("v-icon"),N=_("v-col"),L=_("v-row"),B=_("v-container"),P=_("v-btn"),d=_("v-form"),R=_("v-card"),J=_("v-dialog");return m(),b("div",ee,[n(J,{modelValue:t(p),"onUpdate:modelValue":l[6]||(l[6]=e=>E(p)?p.value=e:null),width:"800",persistent:""},{default:a(()=>[n(R,null,{default:a(()=>[n(D,{class:"mb-0 text-center bg-grey-lighten-3 main_title font-safe-bold",style:{"font-size":"22px"}},{default:a(()=>[v(k($.toUpdate?"تعديل صومعة":"اضافة صومعة جديدة"),1)]),_:1}),n(d,{class:"pa-5",onSubmit:K(V,["prevent"])},{default:a(()=>[n(B,null,{default:a(()=>[n(L,{dir:"rtl"},{default:a(()=>[n(N,{cols:"12",md:"6"},{default:a(()=>[s("div",te,[oe,s("div",ae,[M(s("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=e=>t(o).name=e),placeholder:"اسم الصومعة",name:"typeName",id:"typeName",class:q(t(r).$errors.find(e=>e.$property=="name")?"err_field":"")},null,2),[[G,t(o).name]]),n(x,{class:"position-absolute"},{default:a(()=>[v("mdi-rename-outline")]),_:1})])]),t(r).$errors.find(e=>e.$property=="name")?(m(),b("span",ne,k(t(r).$errors.find(e=>e.$property=="name").$message),1)):w("",!0)]),_:1}),n(N,{cols:"12",md:"6"},{default:a(()=>[s("div",se,[le,s("div",re,[M(s("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=e=>t(o).governorate=e),placeholder:"المحافظة",name:"typeName",id:"typeName",class:q(t(r).$errors.find(e=>e.$property=="governorate")?"err_field":"")},null,2),[[G,t(o).governorate]]),n(x,{class:"position-absolute"},{default:a(()=>[v("mdi-city-variant-outline ")]),_:1})])]),t(r).$errors.find(e=>e.$property=="governorate")?(m(),b("span",ie,k(t(r).$errors.find(e=>e.$property=="governorate").$message),1)):w("",!0)]),_:1}),n(N,{cols:"12",md:"6"},{default:a(()=>[s("div",de,[ce,s("div",pe,[M(s("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=e=>t(o).city=e),placeholder:"المدينة",name:"typeName",id:"typeName",class:q(t(r).$errors.find(e=>e.$property=="city")?"err_field":"")},null,2),[[G,t(o).city]]),n(x,{class:"position-absolute"},{default:a(()=>[v("mdi-city-variant-outline ")]),_:1})])]),t(r).$errors.find(e=>e.$property=="city")?(m(),b("span",ue,k(t(r).$errors.find(e=>e.$property=="city").$message),1)):w("",!0)]),_:1}),n(N,{cols:"12",md:"6"},{default:a(()=>[s("div",_e,[me,s("div",ve,[M(s("input",{type:"text","onUpdate:modelValue":l[3]||(l[3]=e=>t(o).region=e),placeholder:"المنطقة / الحي",name:"typeName",id:"typeName",class:q(t(r).$errors.find(e=>e.$property=="region")?"err_field":"")},null,2),[[G,t(o).region]]),n(x,{class:"position-absolute"},{default:a(()=>[v("mdi-city-variant-outline ")]),_:1})])]),t(r).$errors.find(e=>e.$property=="region")?(m(),b("span",ge,k(t(r).$errors.find(e=>e.$property=="region").$message),1)):w("",!0)]),_:1}),t(h).content?(m(),I(N,{key:0,cols:"12",md:"6"},{default:a(()=>[s("div",fe,[ye,s("div",be,[M(s("select",{name:"",id:"",class:q(["w-100",t(r).$errors.find(e=>e.$property=="client")?"err_field":""]),"onUpdate:modelValue":l[4]||(l[4]=e=>t(o).client=e)},[$e,(m(!0),b(O,null,Q(t(h).content,e=>(m(),b("option",{value:e.id,key:e.id},k(e.name),9,he))),128))],2),[[W,t(o).client]]),n(x,{class:"position-absolute"},{default:a(()=>[v("mdi-account-cowboy-hat-outline ")]),_:1})])]),t(r).$errors.find(e=>e.$property=="client")?(m(),b("span",ke,k(t(r).$errors.find(e=>e.$property=="client").$message),1)):w("",!0)]),_:1})):w("",!0)]),_:1})]),_:1}),s("div",we,[n(P,{color:"red",class:"mr-3",onClick:l[5]||(l[5]=e=>p.value=!1),disabled:t(u)},{default:a(()=>[v("الغاء")]),_:1},8,["disabled"]),n(P,{color:"green",type:"submit",loading:t(u)},{default:a(()=>[v("حفظ")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}}},xe=Ue,Ne={class:"dashboard_banners_listing"},Ve={class:"page_toolbar d-flex align-center justify-space-between"},Ce={class:"toolbar_btns"},De=s("div",null,"لايوجد بيانات",-1),Pe={__name:"Listing",props:["granaries","loading"],emits:["regetItems"],setup($,{emit:f}){const c=g(!1),y=g(!1),U=g(!1),h=g(null),o=g(null),p=g(1),u=g(10),C=g([{title:"رقم",key:"index"},{title:"اسم الصومعة",key:"name"},{title:"العميل",key:"client.name"},{title:"المحافظة",key:"governorate"},{title:"المدينة",key:"city"},{title:"المنطقة / الحي",key:"region"},{title:"اجراء",key:"actions"}]),r=[{title:"الرئيسية",disabled:!1,to:{name:"index"}},{title:"الصوامع",disabled:!0}];return T(()=>p.value,V=>{f("regetItems",{page:V,limit:u.value})}),T(()=>u.value,V=>{f("regetItems",{page:p.value,limit:V})}),(V,i)=>{const l=_("v-icon"),D=_("v-btn"),x=_("v-breadcrumbs"),N=_("v-col"),L=_("v-row"),B=_("v-container"),P=xe;return m(),b("div",Ne,[s("div",Ve,[s("div",Ce,[n(D,{onClick:i[0]||(i[0]=d=>c.value=!0),width:"20",size:"sm",elevation:"0",color:"transparent"},{default:a(()=>[n(l,{color:"white",size:"25"},{default:a(()=>[v("mdi-plus-circle")]),_:1})]),_:1}),n(D,{width:"20",size:"sm",elevation:"0",color:"transparent",class:"ms-3"},{default:a(()=>[n(l,{color:"white",size:"25"},{default:a(()=>[v("mdi-printer")]),_:1})]),_:1})]),n(x,{items:r,dir:"rtl",class:"pa-0 mb"},{title:a(({item:d})=>[v(k(d.title.toUpperCase()),1)]),_:1})]),n(B,{class:"page_container",fluid:""},{default:a(()=>[$.granaries?(m(),I(L,{key:0,class:"px-4"},{default:a(()=>[n(N,{cols:"12",class:"section_container dashboard_table pa-0"},{default:a(()=>[n(t(Y),{headers:t(C),items:$.granaries.content,loading:$.loading,"items-per-page":t(u),"onUpdate:itemsPerPage":i[1]||(i[1]=d=>E(u)?u.value=d:null),page:t(p),"onUpdate:page":i[2]||(i[2]=d=>E(p)?p.value=d:null),"items-length":$.granaries.totalElements?$.granaries.totalElements:0,"no-data-text":"لايوجد بيانات","show-current-page":""},{loading:a(()=>[n(t(Z),{type:"table-row@4"})]),"item.index":a(({item:d})=>[v(k(d.index+1),1)]),"item.actions":a(({item:d})=>[n(l,{color:"blue",style:{cursor:"pointer"},onClick:R=>(h.value=d,y.value=!0)},{default:a(()=>[v("mdi-square-edit-outline")]),_:2},1032,["onClick"]),n(D,{elevation:"0",color:"transparent",loading:d.selectable.loading,ripple:!1},{default:a(()=>[n(l,{color:"red",style:{cursor:"pointer"},class:"ml-2",size:"23",onClick:R=>(o.value=d.selectable,U.value=!0)},{default:a(()=>[v("mdi-lock")]),_:2},1032,["onClick"])]),_:2},1032,["loading"])]),"no-data":a(()=>[De]),_:1},8,["headers","items","loading","items-per-page","page","items-length"])]),_:1})]),_:1})):w("",!0)]),_:1}),t(y)?(m(),I(P,{key:0,openPopup:t(y),onClosePopup:i[3]||(i[3]=d=>(y.value=!1,h.value=null)),toUpdate:t(h),onRegetData:i[4]||(i[4]=d=>(p.value=1,f("regetItems",{page:1,limit:t(u)})))},null,8,["openPopup","toUpdate"])):w("",!0),t(c)?(m(),I(P,{key:1,openPopup:t(c),onClosePopup:i[5]||(i[5]=d=>c.value=!1),onRegetData:i[6]||(i[6]=d=>f("regetItems",{page:1,limit:t(u)}))},null,8,["openPopup"])):w("",!0)])}}},Me=Pe,qe={class:"dashboard_tests_page mb-10"},Be={__name:"index",setup($){const f=H(),{granaries:c}=F(f),y=g(!0),U=async(h,o)=>{y.value=!0,await f.doGetGranaries(h-1,o),y.value=!1};return j(()=>{U(1,10)}),(h,o)=>{const p=Me;return m(),b("div",qe,[n(p,{granaries:t(c),loading:t(y),onRegetItems:o[0]||(o[0]=u=>U(u.page,u.limit))},null,8,["granaries","loading"])])}}};export{Be as default};

import{I as F,r as V,c as R,o as S,f as v,k,l as w,q as a,s as o,m as t,C as l,v as s,B as Y,E as M,z as P,t as D,H as B,G as U,F as j}from"./entry.d2eac3d2.js";import{g as $}from"./granary.cc76c106.js";import{s as G}from"./supplier.895df033.js";import{p as E}from"./products.6ebf0fdf.js";import{h as T}from"./moment.a9aaa855.js";import{V as L,a as z}from"./VSkeletonLoader.d47c2c61.js";import{i as A}from"./invoices.73272cdb.js";const q={class:"supplierPaymentReportFilter"},H={class:"field_container"},J=t("label",{for:"supplierId"},"اختر المورد",-1),K={class:"input_parent position-relative"},O={class:"field_container"},Q=t("label",{for:"granaryId"},"اختر الصومعة",-1),W={class:"input_parent position-relative"},X={class:"field_container"},Z=t("label",{for:"productId"},"المنتج",-1),ee={class:"input_parent position-relative"},te={class:"field_container"},oe=t("label",{for:"productTypeId"},"الفرز",-1),ae={class:"input_parent position-relative"},le={class:"field_container"},ie=t("label",{for:"creationFromDate"},"تاريخ الانشاء (من)",-1),ne={class:"input_parent position-relative"},se=["disabled"],de={class:"field_container"},re=t("label",{for:"creationToDate"},"تاريخ الانشاء (الي)",-1),ce={class:"input_parent position-relative"},ue=["disabled"],pe={class:"field_container",dir:"rtl"},me=t("label",{for:"FromDate"},"تاريخ التوريد (من)",-1),_e={class:"input_parent position-relative"},ve=["disabled"],ge={class:"field_container",dir:"rtl"},fe=t("label",{for:"ToDate"},"تاريخ التوريد (الي)",-1),be={class:"input_parent position-relative"},De=["disabled"],ye={__name:"Filter",props:["loading"],emits:["filterData"],setup(r,{emit:f}){const u=$(),p=G(),y=E(),{granaries:x}=F(u),{suppliers:b}=F(p),{products:c}=F(y),e=V({supplierId:null,granaryId:null,creationFromDate:null,creationToDate:null,FromDate:null,productId:null,productTypeId:null,ToDate:null}),I=R(()=>e.value.productId?e.value.productId.typePriceList:[]),h=()=>{const m={supplierId:e.value.supplierId,granaryId:e.value.granaryId,productId:e.value.productId?e.value.productId.id:null,productTypeId:e.value.productTypeId?e.value.productTypeId.id:null,creationFromDate:e.value.creationFromDate?T(e.value.creationFromDate).format("DD/MM/YYYY"):null,creationToDate:e.value.creationToDate?T(e.value.creationToDate).format("DD/MM/YYYY"):null,FromDate:e.value.FromDate?T(e.value.FromDate).format("DD/MM/YYYY"):null,ToDate:e.value.ToDate?T(e.value.ToDate).format("DD/MM/YYYY"):null};f("filterData",m)};return S(()=>{u.doGetGranaries(0,1e4),y.doGetProducts(0,1e4),p.doGetSuppliers(0,1e4)}),(m,n)=>{const _=v("v-autocomplete"),g=v("v-icon"),i=v("v-col"),C=v("v-btn"),N=v("v-row");return k(),w("div",q,[a(N,{dir:"rtl",class:"pt-0"},{default:o(()=>[a(i,{cols:"12",sm:"6",md:"4",lg:"3",class:"pt-0"},{default:o(()=>[t("div",H,[J,t("div",K,[a(_,{"item-title":"name","item-value":"id",items:l(b).content,transition:"slide-y-transition",variant:"outlined","hide-details":"",modelValue:l(e).supplierId,"onUpdate:modelValue":n[0]||(n[0]=d=>l(e).supplierId=d),disabled:r.loading,placeholder:"اختر المورد"},null,8,["items","modelValue","disabled"]),a(g,{class:"position-absolute"},{default:o(()=>[s("mdi-account-cowboy-hat")]),_:1})])])]),_:1}),a(i,{cols:"12",sm:"6",md:"4",lg:"3",class:"py-0"},{default:o(()=>[t("div",O,[Q,t("div",W,[a(_,{"item-title":"name","item-value":"id",items:l(x).content,transition:"slide-y-transition",variant:"outlined",disabled:r.loading,"hide-details":"",modelValue:l(e).granaryId,"onUpdate:modelValue":n[1]||(n[1]=d=>l(e).granaryId=d),placeholder:"اختر الصومعة"},null,8,["items","disabled","modelValue"]),a(g,{class:"position-absolute"},{default:o(()=>[s("mdi-store-24-hour")]),_:1})])])]),_:1}),a(i,{cols:"12",sm:"6",md:"4",lg:"3",class:"py-0"},{default:o(()=>[t("div",X,[Z,t("div",ee,[a(_,{"return-object":"",items:l(c).content,"item-title":"name","item-value":"id",name:"productId",id:"productId",modelValue:l(e).productId,"onUpdate:modelValue":[n[2]||(n[2]=d=>l(e).productId=d),n[3]||(n[3]=d=>l(e).productTypeId=null)],variant:"outlined",placeholder:"اختر المنتج","hide-details":""},null,8,["items","modelValue"]),a(g,{class:"position-absolute"},{default:o(()=>[s("mdi-basket")]),_:1})])])]),_:1}),a(i,{cols:"12",sm:"6",md:"4",lg:"3",class:"py-0"},{default:o(()=>[t("div",te,[oe,t("div",ae,[a(_,{"return-object":"",items:l(I),"item-title":"productType.name","item-value":"id",variant:"outlined",name:"productTypeId",id:"productTypeId","no-data-text":"لايوجد بيانات",modelValue:l(e).productTypeId,"onUpdate:modelValue":n[4]||(n[4]=d=>l(e).productTypeId=d),"hide-details":"",placeholder:"اختر الفرز"},null,8,["items","modelValue"]),a(g,{class:"position-absolute"},{default:o(()=>[s("mdi-sitemap ")]),_:1})])])]),_:1}),a(i,{cols:"12",sm:"6",md:"4",lg:"3",class:"py-0"},{default:o(()=>[t("div",le,[ie,t("div",ne,[Y(t("input",{type:"datetime-local",name:"creationFromDate",disabled:r.loading,id:"creationFromDate","onUpdate:modelValue":n[5]||(n[5]=d=>l(e).creationFromDate=d),style:{"padding-right":"0 !important"}},null,8,se),[[M,l(e).creationFromDate]]),a(g,{class:"position-absolute"},{default:o(()=>[s("mdi-calendar")]),_:1})])])]),_:1}),a(i,{cols:"12",sm:"6",md:"4",lg:"3",class:"py-0"},{default:o(()=>[t("div",de,[re,t("div",ce,[Y(t("input",{type:"datetime-local",name:"creationToDate",id:"creationToDate",disabled:r.loading,"onUpdate:modelValue":n[6]||(n[6]=d=>l(e).creationToDate=d),style:{"padding-right":"0 !important"}},null,8,ue),[[M,l(e).creationToDate]]),a(g,{class:"position-absolute"},{default:o(()=>[s("mdi-calendar")]),_:1})])])]),_:1}),a(i,{cols:"12",sm:"6",md:"4",lg:"3",class:"py-0"},{default:o(()=>[t("div",pe,[me,t("div",_e,[Y(t("input",{type:"datetime-local",name:"FromDate",id:"FromDate",disabled:r.loading,"onUpdate:modelValue":n[7]||(n[7]=d=>l(e).FromDate=d),style:{"padding-right":"0 !important"}},null,8,ve),[[M,l(e).FromDate]]),a(g,{class:"position-absolute"},{default:o(()=>[s("mdi-calendar")]),_:1})])])]),_:1}),a(i,{cols:"12",sm:"6",md:"4",lg:"3",class:"py-0"},{default:o(()=>[t("div",ge,[fe,t("div",be,[Y(t("input",{type:"datetime-local",name:"ToDate","onUpdate:modelValue":n[8]||(n[8]=d=>l(e).ToDate=d),disabled:r.loading,id:"ToDate",style:{"padding-right":"0 !important"}},null,8,De),[[M,l(e).ToDate]]),a(g,{class:"position-absolute"},{default:o(()=>[s("mdi-calendar")]),_:1})])])]),_:1}),a(i,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-1",style:{display:"flex","align-items":"flex-end"}},{default:o(()=>[a(C,{color:"blue",width:"100",height:"40",elevation:"0",onClick:h,class:"font-weight-bold",disabled:r.loading},{default:o(()=>[s("بحث")]),_:1},8,["disabled"])]),_:1})]),_:1})])}}},Ie=ye;const he={class:"dashboard_banners_listing"},Te={class:"page_toolbar d-flex align-center justify-space-between"},Fe={class:"toolbar_btns"},Ve=t("span",{class:"d-none"},null,-1),xe=t("br",null,null,-1),Ye=t("div",null,"لايوجد بيانات",-1),Me={__name:"Invoices",props:["invoices","loading","suppliers","granaries"],emits:["regetItems","filterData"],setup(r,{emit:f}){const u=V(1),p=V(1e4),y=V([{title:"رقم",key:"index"},{title:"التاريخ",key:"invoiceDate"},{title:"الصومعة",key:"granary.name"},{title:"المورد",key:"supplier.name"},{title:"المستند",key:"documentNumber"},{title:"رقم السيارة",key:"carNumber"},{title:"منتج / فرز",key:"productDetails"},{title:"قبل الخصم",key:"totalInvoicePrice"},{title:"بعد الخصم",key:"totalInvoicePriceAfterDiscount"}]),x=[{title:"الرئيسية",disabled:!1,to:{name:"index"}},{title:"التقارير",to:{name:"reports"}},{title:"تقرير التوريدات",disabled:!0}];return P(()=>u.value,b=>{f("regetItems",{page:b,limit:p.value})}),P(()=>p.value,b=>{f("regetItems",{page:u.value,limit:b})}),(b,c)=>{const e=v("v-icon"),I=v("v-btn"),h=v("v-breadcrumbs"),m=Ie,n=v("v-col"),_=v("v-row"),g=v("v-container");return k(),w("div",he,[t("div",Te,[t("div",Fe,[a(I,{width:"20",size:"sm",elevation:"0",color:"transparent"},{default:o(()=>[a(e,{color:"white",size:"25"},{default:o(()=>[s("mdi-printer")]),_:1})]),_:1})]),a(h,{items:x,dir:"rtl",class:"pa-0 mb"},{title:o(({item:i})=>[s(D(i.title.toUpperCase()),1)]),_:1})]),a(g,{class:"page_container",fluid:""},{default:o(()=>[r.invoices?(k(),B(_,{key:0,class:"px-4 mt-1"},{default:o(()=>[a(n,{cols:"12",class:"px-0"},{default:o(()=>[a(m,{class:"mb-7",loading:r.loading,onFilterData:c[0]||(c[0]=i=>f("filterData",i))},null,8,["loading"])]),_:1}),a(n,{cols:"12",class:"section_container dashboard_table pa-0"},{default:o(()=>[a(l(L),{headers:l(y),items:r.invoices.content,loading:r.loading,"items-per-page":l(p),"onUpdate:itemsPerPage":c[1]||(c[1]=i=>U(p)?p.value=i:null),page:l(u),"onUpdate:page":c[2]||(c[2]=i=>U(u)?u.value=i:null),"items-length":r.invoices.totalElements?r.invoices.totalElements:0,"no-data-text":"لايوجد بيانات","show-current-page":"",id:"invoices_report_table"},{bottom:o(()=>[Ve]),loading:o(()=>[a(l(z),{type:"table-row@4"})]),"item.index":o(({item:i})=>[s(D(i.index+1),1)]),"item.invoiceDate":o(({item:i})=>[t("p",null,[s(D(l(T)(i.selectable.date).format("DD/MM/YYYY"))+" ",1),xe,s(" "+D(l(T)(i.selectable.date).format("hh:mm")),1)])]),"item.productDetails":o(({item:i})=>[s(D(i.selectable.product.name)+" / "+D(i.selectable.productType.name),1)]),"item.totalInvoicePrice":o(({item:i})=>[s(D(i.selectable.totalPrice.toLocaleString()),1)]),"item.totalInvoicePriceAfterDiscount":o(({item:i})=>[s(D(i.selectable.totalAfterDiscount.toLocaleString()),1)]),"no-data":o(()=>[Ye]),_:1},8,["headers","items","loading","items-per-page","page","items-length"])]),_:1})]),_:1})):j("",!0)]),_:1})])}}},ke=Me,we={class:"dashboard_tests_page mb-10"},Re={__name:"index",setup(r){const f=A(),u=G(),p=$(),{invoices:y}=F(f),{granaries:x}=F(p),{suppliers:b}=F(u),c=V(!1),e=V({supplierId:null,granaryId:null,creationFromDate:null,creationToDate:null,FromDate:null,ToDate:null}),I=async(h,m,n)=>{c.value=!0,e.value=n||{supplierId:null,granaryId:null,creationFromDate:null,creationToDate:null,FromDate:null,ToDate:null},await f.doGetInvoices(h-1,m,e.value),c.value=!1};return S(()=>{y.value=[],u.doGetSuppliers(0,1e4),p.doGetGranaries(0,1e4)}),(h,m)=>{const n=ke;return k(),w("div",we,[a(n,{invoices:l(y),loading:l(c),granaries:l(x).content,suppliers:l(b).content,onRegetItems:m[0]||(m[0]=_=>I(_.page,_.limit)),onFilterData:m[1]||(m[1]=_=>I(1,1e3,_))},null,8,["invoices","loading","granaries","suppliers"])])}}};export{Re as default};

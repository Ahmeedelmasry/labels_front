import{r as m,z as L,o as G,f as u,k as y,l as k,q as a,s as e,v as x,t as h,A as F,m as v,B as q,C as t,D as B,E as R,F as C,G as S,H as I,I as H}from"./entry.d2eac3d2.js";import{t as j}from"./taxes.6a84ea1a.js";import{c as V,r as E,n as J,b as K,u as A}from"./index.edcb52a9.js";import{V as O,a as Q}from"./VSkeletonLoader.d47c2c61.js";const W={class:"update_banner"},X={class:"field_container"},Y=v("label",{for:"typeName"},"اسم الضريبة",-1),Z={class:"input_parent position-relative"},ee=["disabled"],te={key:0,class:"err_msg"},ae={class:"field_container"},oe=v("label",{for:"typeName"},"قيمة الضريبة",-1),ne={class:"input_parent position-relative"},se={key:0,class:"err_msg"},le={class:"actions text-center"},ie={__name:"Update",props:["openPopup","toUpdate"],emits:["closePopup","regetData"],setup(c,{emit:f}){const p=c,g=j(),l=m({name:null,amount:null}),r=m(!1),b=m(!1),_=m({name:{required:V.withMessage("هذا الحقل مطلوب",E)},amount:{required:V.withMessage("هذا الحقل مطلوب",E),numeric:V.withMessage("هذا الحقل يقبل ارقام فقط",J),between:V.withMessage("هذا الحقل يجب ان تكون قيمته بين 0 و 1000000",K(0,1e6))}});L(()=>r.value,U=>{U||setTimeout(()=>{f("closePopup")},200)});let n=A(_,l);const N=async()=>{p.toUpdate&&(_.value.image={},n=A(_,l)),await n.value.$validate()&&(b.value=!0,p.toUpdate?await g.doUpdateTax({id:p.toUpdate.selectable.id,name:l.value.name,value:l.value.amount,isLocked:!1})&&(f("regetData"),r.value=!1):await g.doAddTax({name:l.value.name,value:l.value.amount,isLocked:!1})&&(f("regetData"),r.value=!1),b.value=!1)};return G(()=>{r.value=p.openPopup,p.toUpdate&&(l.value.name=p.toUpdate.selectable.name,l.value.amount=p.toUpdate.selectable.value)}),(U,d)=>{const i=u("v-card-title"),$=u("v-icon"),w=u("v-col"),M=u("v-row"),T=u("v-container"),D=u("v-btn"),z=u("v-form"),P=u("v-card"),s=u("v-dialog");return y(),k("div",W,[a(s,{modelValue:t(r),"onUpdate:modelValue":d[3]||(d[3]=o=>S(r)?r.value=o:null),width:"800",persistent:""},{default:e(()=>[a(P,null,{default:e(()=>[a(i,{class:"mb-0 text-center bg-grey-lighten-3 main_title font-weight-bold",style:{"font-size":"22px"}},{default:e(()=>[x(h(c.toUpdate?"تعديل نوع ضريبي":"اضافة نوع ضريبي"),1)]),_:1}),a(z,{class:"pa-5",onSubmit:F(N,["prevent"])},{default:e(()=>[a(T,null,{default:e(()=>[a(M,{dir:"rtl"},{default:e(()=>[a(w,{cols:"6"},{default:e(()=>[v("div",X,[Y,v("div",Z,[q(v("input",{type:"text","onUpdate:modelValue":d[0]||(d[0]=o=>t(l).name=o),placeholder:"اسم الضريبة",name:"typeName",disabled:c.toUpdate&&c.toUpdate.selectable&&c.toUpdate.selectable.name&&(c.toUpdate.selectable.name=="ضريبة دمغة"||c.toUpdate.selectable.name=="مهن زراعية"),id:"typeName",class:B(t(n).$errors.find(o=>o.$property=="name")?"err_field":"")},null,10,ee),[[R,t(l).name]]),a($,{class:"position-absolute"},{default:e(()=>[x("mdi-rename-outline")]),_:1})])]),t(n).$errors.find(o=>o.$property=="name")?(y(),k("span",te,h(t(n).$errors.find(o=>o.$property=="name").$message),1)):C("",!0)]),_:1}),a(w,{cols:"6"},{default:e(()=>[v("div",ae,[oe,v("div",ne,[q(v("input",{type:"text","onUpdate:modelValue":d[1]||(d[1]=o=>t(l).amount=o),placeholder:"قيمة الضريبة",name:"amountNum",id:"amountNum",class:B(t(n).$errors.find(o=>o.$property=="amount")?"err_field":"")},null,2),[[R,t(l).amount]]),a($,{class:"position-absolute"},{default:e(()=>[x("mdi-currency-usd")]),_:1})])]),t(n).$errors.find(o=>o.$property=="amount")?(y(),k("span",se,h(t(n).$errors.find(o=>o.$property=="amount").$message),1)):C("",!0)]),_:1})]),_:1})]),_:1}),v("div",le,[a(D,{color:"red",class:"mr-3",onClick:d[2]||(d[2]=o=>r.value=!1),disabled:t(b)},{default:e(()=>[x("الغاء")]),_:1},8,["disabled"]),a(D,{color:"green",type:"submit",loading:t(b)},{default:e(()=>[x("حفظ")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}}},re=ie,de={class:"dashboard_banners_listing"},ue={class:"page_toolbar d-flex align-center justify-space-between"},ce={class:"toolbar_btns"},pe=v("div",null,"لايوجد بيانات",-1),me={__name:"Listing",props:["taxes","loading"],emits:["regetItems"],setup(c,{emit:f}){const p=m(!1),g=m(!1),l=m(!1),r=m(null),b=m(null),_=m(1),n=m(10),N=[{title:"الرئيسية",disabled:!1,to:{name:"index"}},{title:"انواع الضرايب",disabled:!0}],U=m([{title:"رقم",key:"index"},{title:"اسم الضريبة",key:"name"},{title:"قيمة الضريبة",key:"value"},{title:"اجراء",key:"actions"}]);return L(()=>_.value,d=>{f("regetItems",{page:d,limit:n.value})}),L(()=>n.value,d=>{f("regetItems",{page:_.value,limit:d})}),(d,i)=>{const $=u("v-icon"),w=u("v-btn"),M=u("v-breadcrumbs"),T=u("v-col"),D=u("v-row"),z=u("v-container"),P=re;return y(),k("div",de,[v("div",ue,[v("div",ce,[a(w,{onClick:i[0]||(i[0]=s=>p.value=!0),width:"20",size:"sm",elevation:"0",color:"transparent"},{default:e(()=>[a($,{color:"white",size:"25"},{default:e(()=>[x("mdi-plus-circle")]),_:1})]),_:1}),a(w,{width:"20",size:"sm",elevation:"0",color:"transparent",class:"ms-3"},{default:e(()=>[a($,{color:"white",size:"25"},{default:e(()=>[x("mdi-printer")]),_:1})]),_:1})]),a(M,{items:N,dir:"rtl",class:"pa-0 mb"},{title:e(({item:s})=>[x(h(s.title.toUpperCase()),1)]),_:1})]),a(z,{class:"page_container",fluid:""},{default:e(()=>[c.taxes?(y(),I(D,{key:0,class:"px-4"},{default:e(()=>[a(T,{cols:"12",class:"section_container dashboard_table"},{default:e(()=>[a(t(O),{headers:t(U),items:c.taxes.content,loading:c.loading,"items-per-page":t(n),"onUpdate:itemsPerPage":i[1]||(i[1]=s=>S(n)?n.value=s:null),page:t(_),"onUpdate:page":i[2]||(i[2]=s=>S(_)?_.value=s:null),"items-length":c.taxes.totalElements?c.taxes.totalElements:0,"no-data-text":"لايوجد بيانات","show-current-page":""},{loading:e(()=>[a(t(Q),{type:"table-row@4"})]),"item.index":e(({item:s})=>[x(h(s.index+1),1)]),"item.actions":e(({item:s})=>[a($,{color:"blue",style:{cursor:"pointer"},onClick:o=>(r.value=s,g.value=!0)},{default:e(()=>[x("mdi-square-edit-outline")]),_:2},1032,["onClick"]),a(w,{elevation:"0",color:"transparent",loading:s.selectable.loading,ripple:!1},{default:e(()=>[a($,{color:"red",style:{cursor:"pointer"},class:"ml-2",size:"23",onClick:o=>(b.value=s.selectable,l.value=!0)},{default:e(()=>[x("mdi-lock")]),_:2},1032,["onClick"])]),_:2},1032,["loading"])]),"no-data":e(()=>[pe]),_:1},8,["headers","items","loading","items-per-page","page","items-length"])]),_:1})]),_:1})):C("",!0)]),_:1}),t(g)?(y(),I(P,{key:0,openPopup:t(g),onClosePopup:i[3]||(i[3]=s=>(g.value=!1,r.value=null)),toUpdate:t(r),onRegetData:i[4]||(i[4]=s=>(_.value=1,f("regetItems",{page:1,limit:t(n)})))},null,8,["openPopup","toUpdate"])):C("",!0),t(p)?(y(),I(P,{key:1,openPopup:t(p),onClosePopup:i[5]||(i[5]=s=>p.value=!1),onRegetData:i[6]||(i[6]=s=>f("regetItems",{page:1,limit:t(n)}))},null,8,["openPopup"])):C("",!0)])}}},_e=me,ve={class:"dashboard_tests_page mb-10"},ye={__name:"index",setup(c){const f=j(),{taxes:p}=H(f),g=m(!0),l=async(r,b)=>{g.value=!0,await f.doGetTaxes(r-1,b),g.value=!1};return G(()=>{l(1,10)}),(r,b)=>{const _=_e;return y(),k("div",ve,[a(_,{taxes:t(p),loading:t(g),onRegetItems:b[0]||(b[0]=n=>l(n.page,n.limit))},null,8,["taxes","loading"])])}}};export{ye as default};
